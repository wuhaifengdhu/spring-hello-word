<html xmlns:th="http://www.thymeleaf.org">
<head>
<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet">
<link href="resources/css/fileinput.min.css" media="all" rel="stylesheet" type="text/css" />
<script src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="resources/js/plugins/canvas-to-blob.min.js" type="text/javascript"></script>
<script src="resources/js/plugins/sortable.min.js" type="text/javascript"></script>
<script src="resources/js/plugins/purify.min.js" type="text/javascript"></script>
<script src="resources/js/fileinput.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" type="text/javascript"></script>
<script src="resources/themes/fa/theme.js"></script>
<script src="resources/js/locales/<lang>.js"></script>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<title th:text="#{label.pages.uploadFile}">Title</title>
<style type="text/css">
.wrapper{width:500px;margin-left:auto;margin-right:auto}
label{padding-left:0 !important}
</style>
<style>
.kv-avatar .file-preview-frame,.kv-avatar .file-preview-frame:hover {
    margin: 0;
    padding: 0;
    border: none;
    box-shadow: none;
    text-align: left;
}
.kv-avatar .file-input {
    display: table-cell;
    max-width: 200px;
}
</style>
</head>
<body>

	<nav class="navbar navbar-default">
	  <div class="container-fluid">
	    <div class="navbar-header">
	      <a class="navbar-brand" th:href="@{/backHomepage}" th:text="#{label.pages.home.title}">home</a>
	    </div>
	      <ul class="nav navbar-nav navbar-right">
	        <li><a th:href="@{/logout}" th:text="#{label.pages.logout}">logout</a> </li>
	      </ul>
	    </div>
	</nav>
	
	<div th:if="${param.message != null}" class="alert alert-info" th:text="${param.message[0]}">message</div>

	<div th:if="${param.error != null}" class="alert alert-danger" th:text="${session[SPRING_SECURITY_LAST_EXCEPTION]}">error</div>
	
	<div class="container">
        <div class="row wrapper">
	        <br/>
	        <label class="col-sm-4" th:text="#{label.uploadAvatar.title}">Title</label>
	        <br/><br/>
	        <form class="text-center" action="user/userAvatarUpload" method="post" enctype="multipart/form-data">
			    <div class="kv-avatar" style="width:200px">
			        <input id="avatar" name="file" type="file" class="file-loading">
			    </div>
			</form>
			<br/>
	        <label class="col-sm-4" th:text="#{label.uploadAvatar.currentAvatar}">Title</label>
	        <br/><br/>
			<img src="user/userAvatar" class="img-responsive" alt="user avatar" style="width:180px; height:180px; object-fit:contain">
        </div>
    </div>
	
	<script th:inline="javascript">
	/*<![CDATA[*/
	var btnUpload = '<button type="submit" class="btn btn-primary" title="upload avatar">' + 
    '<i class="glyphicon glyphicon-upload"></i>' +
    '</button>'; 
	$("#avatar").fileinput({
	    overwriteInitial: true,
	    maxFileSize: 1500,
	    showClose: false,
	    showCaption: false,
	    browseLabel: '',
	    removeLabel: '',
	    browseIcon: '<i class="glyphicon glyphicon-folder-open"></i>',
	    removeIcon: '<i class="glyphicon glyphicon-remove"></i>',
	    removeTitle: 'Cancel or reset changes',
	    elErrorContainer: '#kv-avatar-errors-1',
	    msgErrorClass: 'alert alert-block alert-danger',
	    defaultPreviewContent: '<img src="resources/img/default_avatar.png" alt="Avatar" style="width:180px">',
	    layoutTemplates: {main2: '{preview} {remove} {browse} ' + btnUpload},
	    allowedFileExtensions: ["jpg", "png", "gif"]
	});
	/*]]>*/ 
	</script>
</body>
</html>